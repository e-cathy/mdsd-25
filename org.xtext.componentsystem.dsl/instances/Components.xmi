<?xml version="1.0" encoding="ASCII"?>
<MDSDComponentMetamodel:ComponentSystem
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:MDSDComponentMetamodel="http://www.example.org/MDSDComponentMetamodel">
  <repositories
      name="MediaStoreRepo">
    <components
        name="WebGUI"
        providedInterfaces="//@repositories.0/@interfaces.0"
        requiredInterfaces="//@repositories.0/@interfaces.1">
      <providedServices
          name="s"
          correspondingSignature="//@repositories.0/@interfaces.0/@signatures.1"/>
      <providedServices
          name="s"
          correspondingSignature="//@repositories.0/@interfaces.0/@signatures.0"/>
    </components>
    <components
        name="MediaManager"
        providedInterfaces="//@repositories.0/@interfaces.1"
        requiredInterfaces="//@repositories.0/@interfaces.3 //@repositories.0/@interfaces.2">
      <providedServices
          name="s"
          correspondingSignature="//@repositories.0/@interfaces.1/@signatures.0"/>
      <providedServices
          name="s"
          correspondingSignature="//@repositories.0/@interfaces.1/@signatures.1"/>
    </components>
    <components
        name="DBCache"
        providedInterfaces="//@repositories.0/@interfaces.3"
        requiredInterfaces="//@repositories.0/@interfaces.3">
      <providedServices
          name="s"
          correspondingSignature="//@repositories.0/@interfaces.3/@signatures.0"/>
      <providedServices
          name="s"
          correspondingSignature="//@repositories.0/@interfaces.3/@signatures.1"/>
    </components>
    <components
        name="DigitalWatermarking"
        providedInterfaces="//@repositories.0/@interfaces.2">
      <providedServices
          name="s"
          correspondingSignature="//@repositories.0/@interfaces.2/@signatures.0"/>
    </components>
    <components
        name="PoolingAudioDB"
        providedInterfaces="//@repositories.0/@interfaces.3">
      <providedServices
          name="s"
          correspondingSignature="//@repositories.0/@interfaces.3/@signatures.0"/>
      <providedServices
          name="s"
          correspondingSignature="//@repositories.0/@interfaces.3/@signatures.1"/>
    </components>
    <interfaces
        name="HTTP">
      <signatures
          name="HTTPDownload"/>
      <signatures
          name="HTTPUpload"/>
    </interfaces>
    <interfaces
        name="MediaStore">
      <signatures
          name="download"/>
      <signatures
          name="upload"/>
    </interfaces>
    <interfaces
        name="Sound">
      <signatures
          name="watermark"/>
    </interfaces>
    <interfaces
        name="AudioDB">
      <signatures
          name="queryDB"/>
      <signatures
          name="addFile"/>
    </interfaces>
  </repositories>
  <systems interfaces="//@repositories.0/@interfaces.0">
    <assembly>
      <assemblyContexts
          name="PoolingAudioDB"
          component="//@repositories.0/@components.4"
          allocationContext="//@systems.0/@allocation/@allocationContexts.0">
        <providedRoles
            name="R AudioDB PA"
            interface="//@repositories.0/@interfaces.3"/>
      </assemblyContexts>
      <assemblyContexts
          name="WebGUI"
          component="//@repositories.0/@components.0"
          allocationContext="//@systems.0/@allocation/@allocationContexts.2">
        <providedRoles
            name="R HTTP WebGUI"
            interface="//@repositories.0/@interfaces.0"/>
        <requiredRoles
            name="R MediaStore WebGUI"
            interface="//@repositories.0/@interfaces.1"/>
      </assemblyContexts>
      <assemblyContexts
          name="CompositeComponent"
          component="//@systems.0/@assembly/@compositeComponents.0"
          allocationContext="//@systems.0/@allocation/@allocationContexts.1">
        <providedRoles
            name="R MediaStore CompComp"
            interface="//@repositories.0/@interfaces.1"/>
        <requiredRoles
            name="R AudioDB CompComp"
            interface="//@repositories.0/@interfaces.3"/>
      </assemblyContexts>
      <compositeComponents
          name="CompositeComponent"
          providedInterfaces="//@repositories.0/@interfaces.1"
          requiredInterfaces="//@repositories.0/@interfaces.3">
        <assemblyContexts
            name="MediaManager"
            component="//@repositories.0/@components.1">
          <providedRoles
              name="R MediaStore MedMan"
              interface="//@repositories.0/@interfaces.1"/>
          <requiredRoles
              name="R Sound MedMan"
              interface="//@repositories.0/@interfaces.2"/>
          <requiredRoles
              name="R AudioDB MedMan"
              interface="//@repositories.0/@interfaces.3"/>
        </assemblyContexts>
        <assemblyContexts
            name="DigitalWatermarking"
            component="//@repositories.0/@components.3">
          <providedRoles
              name="R Sound Water"
              interface="//@repositories.0/@interfaces.2"/>
        </assemblyContexts>
        <assemblyContexts
            name="DBCache"
            component="//@repositories.0/@components.2">
          <providedRoles
              name="R AudioDB DBCache-p"
              interface="//@repositories.0/@interfaces.3"/>
          <requiredRoles
              name="R Audio DBCache-r"
              interface="//@repositories.0/@interfaces.3"/>
        </assemblyContexts>
        <assemblyConnectors
            name="c3"
            providedRole="//@systems.0/@assembly/@compositeComponents.0/@assemblyContexts.2/@providedRoles.0"
            requiredRole="//@systems.0/@assembly/@compositeComponents.0/@assemblyContexts.0/@requiredRoles.1"/>
        <assemblyConnectors
            name="c4"
            providedRole="//@systems.0/@assembly/@compositeComponents.0/@assemblyContexts.1/@providedRoles.0"
            requiredRole="//@systems.0/@assembly/@compositeComponents.0/@assemblyContexts.0/@requiredRoles.0"/>
        <delegationConnectors
            name="d2"
            role="//@systems.0/@assembly/@compositeComponents.0/@assemblyContexts.0/@providedRoles.0"
            delegatedInterface="//@repositories.0/@interfaces.1"/>
        <delegationConnectors
            name="d3"
            role="//@systems.0/@assembly/@compositeComponents.0/@assemblyContexts.2/@requiredRoles.0"
            delegatedInterface="//@repositories.0/@interfaces.3"/>
      </compositeComponents>
      <assemblyConnectors
          name="c1"
          providedRole="//@systems.0/@assembly/@assemblyContexts.2/@providedRoles.0"
          requiredRole="//@systems.0/@assembly/@assemblyContexts.1/@requiredRoles.0"/>
      <assemblyConnectors
          name="c2"
          providedRole="//@systems.0/@assembly/@assemblyContexts.0/@providedRoles.0"
          requiredRole="//@systems.0/@assembly/@assemblyContexts.2/@requiredRoles.0"/>
      <delegationConnectors
          name="d1"
          role="//@systems.0/@assembly/@assemblyContexts.1/@providedRoles.0"
          delegatedInterface="//@repositories.0/@interfaces.0"/>
    </assembly>
    <allocation>
      <allocationContexts
          name="a1"
          container="//@systems.0/@environment/@containers.1"
          assemblyContext="//@systems.0/@assembly/@assemblyContexts.0"/>
      <allocationContexts
          name="a2"
          container="//@systems.0/@environment/@containers.0"
          assemblyContext="//@systems.0/@assembly/@assemblyContexts.2"/>
      <allocationContexts
          name="a3"
          container="//@systems.0/@environment/@containers.0"
          assemblyContext="//@systems.0/@assembly/@assemblyContexts.1"/>
    </allocation>
    <environment>
      <links
          name="ServerLink"
          containers="//@systems.0/@environment/@containers.0 //@systems.0/@environment/@containers.1"/>
      <containers
          name="ApplicationServer"
          links="//@systems.0/@environment/@links.0"/>
      <containers
          name="DatabaseServer"
          links="//@systems.0/@environment/@links.0"/>
    </environment>
  </systems>
</MDSDComponentMetamodel:ComponentSystem>
